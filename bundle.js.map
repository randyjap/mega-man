{"version":3,"sources":["webpack:///webpack/bootstrap ce07155a3ac79def4bcd","webpack:///./entry.js","webpack:///./lib/game.js","webpack:///./lib/levels.js","webpack:///./lib/canvas.js","webpack:///./lib/vector_util.js","webpack:///./lib/sprites.js"],"names":["document","addEventListener","play","arrowCodes","Game","plan","grid","sprites","width","length","height","y","row","transformedRow","x","chr","fieldType","Sprite","characters","push","megaman","filter","player","type","boss","status","finishDelay","prototype","isFinished","findCollision","pos","size","left","Math","floor","right","ceil","top","bottom","findOverlappingObject","i","other","maxStep","animate","step","keys","thisStep","min","forEach","act","spriteOverlapAction","sprite","hitPoints","hit","trackKeys","codes","pressed","Object","create","handler","event","hasOwnProperty","keyCode","down","preventDefault","runAnimation","frameFunc","lastTime","frame","time","stop","timeStep","requestAnimationFrame","arrows","start","level","Display","gameContinues","display","body","window","drawFrame","clear","plans","startLevel","n","console","log","levels","Canvas","spriteSize","spriteRoll","createElement","src","flipHorizontally","context","around","translate","scale","parent","canvas","innerWidth","appendChild","cx","getContext","animationTime","facingRight","viewport","parentNode","removeChild","updateViewport","clearDisplay","drawBackground","drawSprites","view","margin","center","plus","times","max","fillStyle","fillRect","xPosition","yPosition","spriteFrameNumber","drawImage","drawMegaMan","speed","rectangle","Path2D","rect","stroke","save","restore","drawBoss","destroyed","random","drawBullet","VectorUtil","factor","Boss","Bullet","Megaman","gravity","jumpSpeed","megamanXSpeed","bossFiringRate","megamanFiringRate","lastFire","Date","moveY","game","motion","newPos","collidedObject","cFire","fireRight","otherSprite","bulletType","moveX","up","shoot"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ce07155a3ac79def4bcd","import { play } from './lib/game.js';\nimport { levels } from './lib/levels.js';\nimport { Canvas } from './lib/canvas.js';\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  play(levels, Canvas);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./entry.js","import { VectorUtil } from './vector_util';\nimport { Boss, Bullet, Megaman } from './sprites';\n\nlet arrowCodes = { 65: \"left\", 87: \"up\", 68: \"right\", 32: \"shoot\" };\n\nfunction Game(plan) {\n  this.grid = [];\n  this.sprites = [];\n  this.width = plan[0].length;\n  this.height = plan.length;\n\n  for (let y = 0; y < this.height; y++) {\n    let row = plan[y], transformedRow = [];\n    for (let x = 0; x < this.width; x++) {\n      let chr = row[x];\n      let fieldType = null;\n      let Sprite = characters[chr];\n      if (Sprite)\n        this.sprites.push(new Sprite(new VectorUtil(x, y), chr));\n      else if (chr === \"#\")\n        fieldType = \"block\";\n      else if (chr === \"W\")\n        fieldType = \"water\";\n      transformedRow.push(fieldType);\n    }\n    this.grid.push(transformedRow);\n  }\n\n  this.megaman = this.sprites.filter(player => {\n    return player.type === \"megaman\";\n  })[0];\n\n  this.boss = this.sprites.filter(player => {\n    return player.type === \"boss\";\n  })[0];\n\n  this.status = this.finishDelay = null;\n}\n\nGame.prototype.isFinished = function() {\n  return this.status !== null && this.finishDelay < 0;\n};\n\nlet characters = {\n  \"M\": Megaman,\n  \"B\": Boss\n};\n\nGame.prototype.findCollision = function(pos, size) {\n  let left = Math.floor(pos.x);\n  let right = Math.ceil(pos.x + size.x);\n  let top = Math.floor(pos.y);\n  let bottom = Math.ceil(pos.y + size.y);\n\n  if (left < 0 || right > this.width || top < 0) return \"block\";\n\n  for (let y = top; y < bottom; y++) {\n    for (let x = left; x < right; x++) {\n      let fieldType = this.grid[y][x];\n      if (fieldType) return fieldType;\n    }\n  }\n};\n\nGame.prototype.findOverlappingObject = function(player) {\n  for (let i = 0; i < this.sprites.length; i++) {\n    let other = this.sprites[i];\n    if (other !== player &&\n        player.pos.x + player.size.x > other.pos.x &&\n        player.pos.x < other.pos.x + other.size.x &&\n        player.pos.y + player.size.y > other.pos.y &&\n        player.pos.y < other.pos.y + other.size.y)\n      return other;\n  }\n};\n\nlet maxStep = 0.05;\n\nGame.prototype.animate = function(step, keys) {\n  if (this.status !== null)\n    this.finishDelay -= step;\n\n  while (step > 0) {\n    let thisStep = Math.min(step, maxStep);\n    this.sprites.forEach(function(player) {\n      player.act(thisStep, this, keys);\n    }, this);\n    step -= thisStep;\n  }\n};\n\nGame.prototype.spriteOverlapAction = function(type, player, sprite) {\n  if (type === \"water\" && this.status === null) {\n    if (this.megaman.hitPoints > 0) this.megaman.hitPoints -= 0.3;\n    if (this.megaman.hitPoints <= 0) {\n      this.status = \"lost\";\n      this.finishDelay = 4;\n    }\n    this.megaman.hit = true;\n  } else if (type === \"friendly-bullet\" && sprite && sprite.type === \"boss\" && this.status === null) {\n    sprite.hitPoints--;\n    sprite.hit = true;\n    if (sprite.hitPoints <= 0) {\n      this.status = \"won\";\n      this.finishDelay = 4;\n    }\n  } else if (type === \"unfriendly-bullet\" && sprite && sprite.type === \"megaman\" && this.status === null) {\n    sprite.hitPoints--;\n    sprite.hit = true;\n    if (sprite.hitPoints <= 0) {\n      this.status = \"lost\";\n      this.finishDelay = 4;\n    }\n  }\n};\n\nfunction trackKeys(codes) {\n  let pressed = Object.create(null);\n  function handler(event) {\n    if (codes.hasOwnProperty(event.keyCode)) {\n      let down = event.type === \"keydown\";\n      pressed[codes[event.keyCode]] = down;\n      event.preventDefault();\n    }\n  }\n  addEventListener(\"keydown\", handler);\n  addEventListener(\"keyup\", handler);\n  return pressed;\n}\n\nfunction runAnimation(frameFunc) {\n  let lastTime = null;\n  function frame(time) {\n    let stop = false;\n    if (lastTime !== null) {\n      let timeStep = Math.min(time - lastTime, 100) / 1000;\n      stop = frameFunc(timeStep) === false;\n    }\n    lastTime = time;\n    if (!stop)\n      requestAnimationFrame(frame);\n  }\n  requestAnimationFrame(frame);\n}\n\nlet arrows = trackKeys(arrowCodes);\n\nfunction start(level, Display, gameContinues) {\n  let display = new Display(document.body, level);\n  window.display = display;\n  runAnimation(function(step) {\n    level.animate(step, arrows);\n    display.drawFrame(step);\n    if (level.isFinished()) {\n      display.clear();\n      if (gameContinues)\n        gameContinues(level.status);\n      return false;\n    }\n  });\n}\n\nexport function play(plans, Display) {\n  function startLevel(n) {\n    start(new Game(plans[n]), Display, function(status) {\n      if (status === \"lost\")\n        console.log(\"GAME OVER!\");\n      else if (status === \"won\")\n        console.log(\"THE END!\");\n    });\n  }\n  startLevel(0);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game.js","export let levels = [\n  [\"                                                                                \",\n   \"                                                                                \",\n   \"                                                                                \",\n   \"                                                                                \",\n   \"                                                                                \",\n   \"                                                                                \",\n   \"                                                                                \",\n   \"                                                                                \",\n   \"                                                                                \",\n   \"                                         B                                      \",\n   \"     M           ###                   #####                ########            \",\n   \"WW############WWWWWWWWW####WWW########################WWWWWWWWWW#############WWW\",\n   \"                                                                                \",]\n ];\n\n\n\n// WEBPACK FOOTER //\n// ./lib/levels.js","let spriteSize = 50;\nlet spriteRoll = document.createElement(\"img\");\nspriteRoll.src = \"images/megaman.png\";\n\nfunction flipHorizontally(context, around) {\n  context.translate(around, 0);\n  context.scale(-1, 1);\n  context.translate(-around, 0);\n}\n\nexport function Canvas(parent, level) {\n  this.canvas = document.createElement(\"canvas\");\n  this.canvas.width = Math.min(window.innerWidth, level.width * spriteSize);\n  this.canvas.height = Math.min(window.innerWidth / 3, level.height * spriteSize);\n  parent.appendChild(this.canvas);\n  this.cx = this.canvas.getContext(\"2d\");\n\n  this.level = level;\n  this.animationTime = 0;\n  this.facingRight = false;\n\n  this.viewport = {\n    left: 0,\n    top: 0,\n    width: this.canvas.width / spriteSize,\n    height: this.canvas.height / spriteSize\n  };\n\n  this.drawFrame(0);\n}\n\nCanvas.prototype.clear = function() {\n  this.canvas.parentNode.removeChild(this.canvas);\n};\n\nCanvas.prototype.drawFrame = function(step) {\n  this.animationTime += step;\n\n  this.updateViewport();\n  this.clearDisplay();\n  this.drawBackground();\n  this.drawSprites();\n};\n\nCanvas.prototype.updateViewport = function() {\n  let view = this.viewport, margin = view.width / 6;\n  let megaman = this.level.megaman;\n  let center = megaman.pos.plus(megaman.size.times(0.5));\n\n  if (center.x < view.left + margin * 2)\n    view.left = Math.max(center.x - margin * 2, 0);\n  else if (center.x > view.left + view.width - margin * 2)\n    view.left = Math.min(center.x + margin * 2 - view.width,\n                         this.level.width - view.width);\n  if (center.y < view.top + margin)\n    view.top = Math.max(center.y - margin, 0);\n  else if (center.y > view.top + view.height - margin)\n    view.top = Math.min(center.y + margin - view.height,\n                        this.level.height - view.height);\n};\n\nCanvas.prototype.clearDisplay = function() {\n  if (this.level.status === \"won\") {\n    //TODO\n    console.log(\"YOU WON!\");\n  } else if (this.level.status === \"lost\") {\n    //TODO\n    console.log(\"YOU LOST!\");\n  } else {\n    this.cx.fillStyle = \"lightblue\";\n  }\n  // Don't forget to make things transparent!\n  this.cx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n};\n\nCanvas.prototype.drawBackground = function() {\n  let view = this.viewport;\n  let left = Math.floor(view.left);\n  let right = Math.ceil(view.left + view.width);\n  let top = Math.floor(view.top);\n  let bottom = Math.ceil(view.top + view.height);\n\n  for (let y = top; y < bottom; y++) {\n    for (let x = left; x < right; x++) {\n      let fieldType = this.level.grid[y][x];\n      if (fieldType === null) continue;\n      let xPosition = (x - view.left) * spriteSize;\n      let yPosition = (y - view.top) * spriteSize;\n\n      let spriteFrameNumber;\n      if (fieldType === \"water\") spriteFrameNumber = 16;\n      if (fieldType === \"block\") spriteFrameNumber = 15;\n\n      this.cx.drawImage(\n        spriteRoll,\n        (spriteFrameNumber * spriteSize), 0, spriteSize, spriteSize,\n        xPosition, yPosition, spriteSize, spriteSize);\n    }\n  }\n};\n\nCanvas.prototype.drawMegaMan = function(x, y, width, height) {\n  let spriteFrameNumber = 0;\n  let megaman = this.level.megaman;\n\n  if (megaman.speed.x !== 0)\n    this.facingRight = megaman.speed.x < 0;\n\n  if (megaman.hit) {\n    spriteFrameNumber = 14;\n  } else if (megaman.speed.y !== 0) {\n    spriteFrameNumber = 11;\n  } else if (megaman.speed.x !== 0) {\n    spriteFrameNumber = Math.floor(this.animationTime * 12) % 10 + 1;\n  }\n\n  let rectangle = new Path2D();\n  rectangle.rect(x, y - 20, 50 * megaman.hitPoints / 50, 20);\n  this.cx.stroke(rectangle);\n  this.cx.save(); //keep drawing context intact\n\n  if (this.facingRight) flipHorizontally(this.cx, x + width / 2);\n  this.cx.drawImage(\n    spriteRoll,\n    (spriteFrameNumber * width), 0,\n    width, height,\n    x, y, width, height\n  );\n\n  this.cx.restore(); //restore drawing context\n\n};\n\nCanvas.prototype.drawBoss = function(x, y, width, height) {\n  let spriteFrameNumber = 13;\n  let boss = this.level.boss;\n  if (boss.destroyed) {\n    spriteFrameNumber = [17, 18][Math.floor(Math.random() * [17, 18].length)];\n  } else if (boss.hit) {\n    spriteFrameNumber = [17, 18][Math.floor(Math.random() * [17, 18].length)];\n  }\n\n  let rectangle = new Path2D();\n  rectangle.rect(x, y - 20, 50 * boss.hitPoints / 50, 20);\n  this.cx.stroke(rectangle);\n\n  this.cx.save(); //keep drawing context intact\n  if (this.level.megaman.pos.x > this.level.boss.pos.x) flipHorizontally(this.cx, x + width / 2);\n\n  this.cx.drawImage(\n    spriteRoll,\n    (spriteFrameNumber * width), 0,\n    width, height,\n    x, y, width, height\n  );\n\n  this.cx.restore(); //restore drawing context\n};\n\nCanvas.prototype.drawBullet = function(x, y, width, height) {\n  let spriteFrameNumber = 12;\n  this.cx.drawImage(\n    spriteRoll,\n    (spriteFrameNumber * width), 0,\n    width, height,\n    x, y, width, height\n  );\n};\n\nCanvas.prototype.drawSprites = function() {\n  this.level.sprites.forEach(function(sprite) {\n    let width = sprite.size.x * spriteSize;\n    let height = sprite.size.y * spriteSize;\n    let x = (sprite.pos.x - this.viewport.left) * spriteSize;\n    let y = (sprite.pos.y - this.viewport.top) * spriteSize;\n    if (sprite.type === \"megaman\") {\n      this.drawMegaMan(x, y, width, height);\n    } else if (sprite.type === \"boss\"){\n      this.drawBoss(x, y, width, height);\n    } else if (sprite.type === \"friendly-bullet\"){\n      this.drawBullet(x, y, width, height);\n    } else if (sprite.type === \"unfriendly-bullet\"){\n      this.drawBullet(x, y, width, height);\n    }\n  }, this);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/canvas.js","export function VectorUtil(x, y) {\n  this.x = x; this.y = y;\n}\nVectorUtil.prototype.plus = function(other) {\n  return new VectorUtil(this.x + other.x, this.y + other.y);\n};\nVectorUtil.prototype.times = function(factor) {\n  return new VectorUtil(this.x * factor, this.y * factor);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/vector_util.js","import { VectorUtil } from './vector_util';\n\nlet gravity = 45;\nlet jumpSpeed = 18;\nlet megamanXSpeed = 6;\nlet bossFiringRate =  4 / 3;\nlet megamanFiringRate = 1 / 3;\n\nexport function Boss(pos) {\n  this.pos = pos.plus(new VectorUtil(0, 0));\n  this.size = new VectorUtil(1, 1);\n  this.speed = new VectorUtil(0, 0);\n  this.hitPoints = 100;\n  this.lastFire = new Date();\n  this.hit = false;\n  this.destroyed = false;\n}\n\nBoss.prototype.type = \"boss\";\n\nBoss.prototype.moveY = function(step, game) {\n  this.speed.y += step * gravity;\n  let motion = new VectorUtil(0, this.speed.y * step);\n  let newPos = this.pos.plus(motion);\n  let collidedObject = game.findCollision(newPos, this.size);\n  if (collidedObject) {\n    game.spriteOverlapAction(collidedObject);\n    if (this.hitPoints > 0 && this.speed.y > 0) {\n      this.speed.y = 0;\n      this.speed.y = -(Math.random() * (20 - 5) + 5);\n    } else {\n      this.speed.y = 0;\n    }\n  } else {\n    this.pos = newPos;\n  }\n};\n\nBoss.prototype.act = function(step, game) {\n  this.moveY(step, game);\n\n  // this will slow down the firing rate to 3 a second\n  if (!this.destroyed) {\n    let cFire = new Date();\n    if (((cFire - this.lastFire) / 1000) > bossFiringRate){\n      let fireRight = true;\n      if (this.pos.x > game.megaman.pos.x) fireRight = false;\n      game.sprites.push(new Bullet(new VectorUtil(this.pos.x, this.pos.y), \"unfriendly-bullet\", fireRight));\n      this.lastFire = cFire;\n    }\n  }\n\n  let otherSprite = game.findOverlappingObject(this);\n  if (otherSprite) {\n    game.spriteOverlapAction(otherSprite.type, otherSprite, this);\n  } else {\n    this.hit = false;\n  }\n\n  if (game.status === \"won\") {\n    this.destroyed = true;\n  }\n};\n\nexport function Bullet(pos, bulletType, fireRight) {\n  this.pos = pos.plus(new VectorUtil(0, 0));\n  this.size = new VectorUtil(1, 1);\n  if (fireRight === true) {\n    this.speed = new VectorUtil(10, 0);\n  } else if (fireRight === false) {\n    this.speed = new VectorUtil(-10, 0);\n  } else if (window.display.facingRight) {\n    this.speed = new VectorUtil(-10, 0);\n  } else {\n    this.speed = new VectorUtil(10, 0);\n  }\n  this.type = bulletType;\n}\n\nBullet.prototype.moveX = function(step, game, keys) {\n  let motion = new VectorUtil(this.speed.x * step, 0);\n  let newPos = this.pos.plus(motion);\n  this.pos = newPos;\n};\n\nBullet.prototype.act = function(step, game) {\n  this.moveX(step, game);\n};\n\nexport function Megaman(pos) {\n  this.pos = pos.plus(new VectorUtil(0, 0));\n  this.size = new VectorUtil(1, 1);\n  this.speed = new VectorUtil(0, 0);\n  this.lastFire = new Date();\n  this.hitPoints = 50;\n  this.hit = false;\n}\n\nMegaman.prototype.type = \"megaman\";\n\nMegaman.prototype.moveX = function(step, game, keys) {\n  this.speed.x = 0;\n  if (keys.left) this.speed.x -= megamanXSpeed;\n  if (keys.right) this.speed.x += megamanXSpeed;\n\n  let motion = new VectorUtil(this.speed.x * step, 0);\n  let newPos = this.pos.plus(motion);\n  let collidedObject = game.findCollision(newPos, this.size);\n  if (collidedObject) {\n    game.spriteOverlapAction(collidedObject);\n  } else if (this.hitPoints > 0) {\n    this.hit = false;\n    this.pos = newPos;\n  }\n};\n\nMegaman.prototype.moveY = function(step, game, keys) {\n  this.speed.y += step * gravity;\n  let motion = new VectorUtil(0, this.speed.y * step);\n  let newPos = this.pos.plus(motion);\n  let collidedObject = game.findCollision(newPos, this.size);\n  if (collidedObject) {\n    game.spriteOverlapAction(collidedObject);\n    if (keys.up && this.speed.y > 0) {\n      this.speed.y = -jumpSpeed;\n    } else {\n      this.speed.y = 0;\n    }\n  } else if (this.hitPoints > 0) {\n    this.pos = newPos;\n  }\n};\n\nMegaman.prototype.act = function(step, game, keys) {\n  this.moveX(step, game, keys);\n  this.moveY(step, game, keys);\n  if (keys.shoot) {\n    // this will slow down the firing rate to 3 a second\n    let cFire = new Date();\n    if (((cFire - this.lastFire) / 1000) > megamanFiringRate){\n      game.sprites.push(new Bullet(new VectorUtil(this.pos.x, this.pos.y), \"friendly-bullet\"));\n      this.lastFire = cFire;\n    }\n  }\n\n  let otherSprite = game.findOverlappingObject(this);\n  if (otherSprite) {\n    game.spriteOverlapAction(otherSprite.type, otherSprite, this);\n  }\n\n  // Losing animation\n  if (game.status === \"lost\") {\n    this.hit = true;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/sprites.js"],"sourceRoot":""}