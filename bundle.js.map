{"version":3,"sources":["webpack:///webpack/bootstrap b07ba8567c59bb391609","webpack:///./entry.js","webpack:///./lib/game.js","webpack:///./lib/levels.js"],"names":["document","addEventListener","play","Canvas","gravity","jumpSpeed","megamanXSpeed","spriteSize","spriteRoll","createElement","arrowCodes","firingRate","src","Level","plan","grid","sprites","width","length","height","y","row","transformedRow","x","chr","fieldType","Sprite","characters","push","VectorUtil","megaman","filter","player","type","status","finishDelay","prototype","isFinished","plus","other","times","factor","Megaman","Boss","pos","size","speed","hitPoints","moveY","step","level","motion","newPos","collidedObject","findCollision","spriteOverlapAction","Math","random","act","otherSprite","findOverlappingObject","Bullet","facingRight","window","display","moveX","keys","lastFire","Date","left","right","shoot","cFire","up","floor","ceil","top","bottom","i","maxStep","animate","thisStep","min","forEach","sprite","trackKeys","codes","pressed","Object","create","handler","event","hasOwnProperty","keyCode","down","preventDefault","runAnimation","frameFunc","lastTime","frame","time","stop","timeStep","requestAnimationFrame","arrows","runLevel","Display","gameContinues","body","drawFrame","clear","plans","startLevel","n","flipHorizontally","context","around","translate","scale","parent","canvas","appendChild","cx","getContext","animationTime","viewport","parentNode","removeChild","updateViewport","clearDisplay","drawBackground","drawSprites","view","margin","center","max","console","log","fillStyle","fillRect","xPosition","yPosition","spriteFrameNumber","drawImage","drawMegaMan","save","restore","drawBoss","drawBullet","levels"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b07ba8567c59bb391609","import { play, Canvas } from './lib/game.js';\nimport { levels } from './lib/levels.js';\n// import { CanvasDisplay } from './lib/canvas.js';\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  play(levels, Canvas);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./entry.js","let gravity = 45;\nlet jumpSpeed = 18;\nlet megamanXSpeed = 6;\nlet spriteSize = 50;\nlet spriteRoll = document.createElement(\"img\");\nlet arrowCodes = { 65: \"left\", 87: \"up\", 68: \"right\", 32: \"shoot\" };\nlet firingRate =  1 / 3;\n\nspriteRoll.src = \"images/megaman.png\";\n\nfunction Level(plan) {\n  this.grid = [];\n  this.sprites = [];\n  this.width = plan[0].length;\n  this.height = plan.length;\n\n  for (let y = 0; y < this.height; y++) {\n    let row = plan[y], transformedRow = [];\n    for (let x = 0; x < this.width; x++) {\n      let chr = row[x];\n      let fieldType = null;\n      let Sprite = characters[chr];\n      if (Sprite)\n        this.sprites.push(new Sprite(new VectorUtil(x, y), chr));\n      else if (chr === \"#\")\n        fieldType = \"block\";\n      else if (chr === \"W\")\n        fieldType = \"water\";\n      transformedRow.push(fieldType);\n    }\n    this.grid.push(transformedRow);\n  }\n\n  this.megaman = this.sprites.filter(player => {\n    return player.type === \"megaman\";\n  })[0];\n  this.status = this.finishDelay = null;\n}\n\nLevel.prototype.isFinished = function() {\n  return this.status !== null && this.finishDelay < 0;\n};\n\nfunction VectorUtil(x, y) {\n  this.x = x; this.y = y;\n}\nVectorUtil.prototype.plus = function(other) {\n  return new VectorUtil(this.x + other.x, this.y + other.y);\n};\nVectorUtil.prototype.times = function(factor) {\n  return new VectorUtil(this.x * factor, this.y * factor);\n};\n\nlet characters = {\n  \"M\": Megaman,\n  \"B\": Boss\n};\n\nfunction Boss(pos) {\n  this.pos = pos.plus(new VectorUtil(0, 0));\n  this.size = new VectorUtil(1, 1);\n  this.speed = new VectorUtil(0, 0);\n  this.hitPoints = 100;\n}\n\nBoss.prototype.type = \"boss\";\n\nBoss.prototype.moveY = function(step, level) {\n  this.speed.y += step * gravity;\n  let motion = new VectorUtil(0, this.speed.y * step);\n  let newPos = this.pos.plus(motion);\n  let collidedObject = level.findCollision(newPos, this.size);\n  if (collidedObject) {\n    level.spriteOverlapAction(collidedObject);\n    if (this.speed.y > 0)\n      this.speed.y = -(Math.random() * (20 - 5) + 5);\n    else\n      this.speed.y = 0;\n  } else {\n    this.pos = newPos;\n  }\n};\n\nBoss.prototype.act = function(step, level) {\n  this.moveY(step, level);\n\n  let otherSprite = level.findOverlappingObject(this);\n  if (otherSprite) {\n    level.spriteOverlapAction(otherSprite.type, otherSprite, this);\n  }\n\n  if (level.status === \"lost\") {\n    // TODO\n  }\n};\n\nfunction Bullet(pos, facingRight) {\n  this.pos = pos.plus(new VectorUtil(0, 0));\n  this.size = new VectorUtil(1, 1);\n  if (window.display.facingRight) {\n    this.speed = new VectorUtil(-10, 0);\n  } else {\n    this.speed = new VectorUtil(10, 0);\n  }\n}\n\nBullet.prototype.type = \"bullet\";\n\nBullet.prototype.moveX = function(step, level, keys) {\n  let motion = new VectorUtil(this.speed.x * step, 0);\n  let newPos = this.pos.plus(motion);\n  this.pos = newPos;\n};\n\nBullet.prototype.act = function(step, level) {\n  this.moveX(step, level);\n};\n\nfunction Megaman(pos) {\n  this.pos = pos.plus(new VectorUtil(0, 0));\n  this.size = new VectorUtil(1, 1);\n  this.speed = new VectorUtil(0, 0);\n  this.lastFire = new Date();\n}\n\nMegaman.prototype.type = \"megaman\";\n\nMegaman.prototype.moveX = function(step, level, keys) {\n  this.speed.x = 0;\n  if (keys.left) this.speed.x -= megamanXSpeed;\n  if (keys.right) this.speed.x += megamanXSpeed;\n\n  if (keys.shoot) {\n    // this will slow down the firing rate to 3 a second\n    let cFire = new Date();\n    if (((cFire - this.lastFire) / 1000) > firingRate){\n      level.sprites.push(new Bullet(new VectorUtil(this.pos.x, this.pos.y)));\n      this.lastFire = cFire;\n    }\n  }\n  let motion = new VectorUtil(this.speed.x * step, 0);\n  let newPos = this.pos.plus(motion);\n  let collidedObject = level.findCollision(newPos, this.size);\n  if (collidedObject)\n    level.spriteOverlapAction(collidedObject);\n  else\n    this.pos = newPos;\n};\n\nMegaman.prototype.moveY = function(step, level, keys) {\n  this.speed.y += step * gravity;\n  let motion = new VectorUtil(0, this.speed.y * step);\n  let newPos = this.pos.plus(motion);\n  let collidedObject = level.findCollision(newPos, this.size);\n  if (collidedObject) {\n    level.spriteOverlapAction(collidedObject);\n    if (keys.up && this.speed.y > 0)\n      this.speed.y = -jumpSpeed;\n    else\n      this.speed.y = 0;\n  } else {\n    this.pos = newPos;\n  }\n};\n\nMegaman.prototype.act = function(step, level, keys) {\n  this.moveX(step, level, keys);\n  this.moveY(step, level, keys);\n\n  let otherSprite = level.findOverlappingObject(this);\n  if (otherSprite)\n    level.spriteOverlapAction(otherSprite.type, otherSprite);\n\n  // Losing animation\n  if (level.status === \"lost\") {\n    this.pos.y += step;\n    this.size.y -= step;\n  }\n};\n\nLevel.prototype.findCollision = function(pos, size) {\n  let left = Math.floor(pos.x);\n  let right = Math.ceil(pos.x + size.x);\n  let top = Math.floor(pos.y);\n  let bottom = Math.ceil(pos.y + size.y);\n\n  if (left < 0 || right > this.width || top < 0) return \"block\";\n\n  for (let y = top; y < bottom; y++) {\n    for (let x = left; x < right; x++) {\n      let fieldType = this.grid[y][x];\n      if (fieldType) return fieldType;\n    }\n  }\n};\n\nLevel.prototype.findOverlappingObject = function(player) {\n  for (let i = 0; i < this.sprites.length; i++) {\n    let other = this.sprites[i];\n    if (other !== player &&\n        player.pos.x + player.size.x > other.pos.x &&\n        player.pos.x < other.pos.x + other.size.x &&\n        player.pos.y + player.size.y > other.pos.y &&\n        player.pos.y < other.pos.y + other.size.y)\n      return other;\n  }\n};\n\nlet maxStep = 0.05;\n\nLevel.prototype.animate = function(step, keys) {\n  if (this.status !== null)\n    this.finishDelay -= step;\n\n  while (step > 0) {\n    let thisStep = Math.min(step, maxStep);\n    this.sprites.forEach(function(player) {\n      player.act(thisStep, this, keys);\n    }, this);\n    step -= thisStep;\n  }\n};\n\nLevel.prototype.spriteOverlapAction = function(type, player, sprite) {\n  if (type === \"water\" && this.status === null) {\n    this.status = \"lost\";\n    this.finishDelay = 1;\n  } else if (type === \"bullet\" && sprite && sprite.type === \"boss\" && this.status === null) {\n    sprite.hitPoints--;\n    if (sprite.hitPoints <= 0) {\n      this.status = \"won\";\n      this.finishDelay = 1;\n    }\n  }\n  //TODO Win Condition\n};\n\nfunction trackKeys(codes) {\n  let pressed = Object.create(null);\n  function handler(event) {\n    if (codes.hasOwnProperty(event.keyCode)) {\n      let down = event.type === \"keydown\";\n      pressed[codes[event.keyCode]] = down;\n      event.preventDefault();\n    }\n  }\n  addEventListener(\"keydown\", handler);\n  addEventListener(\"keyup\", handler);\n  return pressed;\n}\n\nfunction runAnimation(frameFunc) {\n  let lastTime = null;\n  function frame(time) {\n    let stop = false;\n    if (lastTime !== null) {\n      let timeStep = Math.min(time - lastTime, 100) / 1000;\n      stop = frameFunc(timeStep) === false;\n    }\n    lastTime = time;\n    if (!stop)\n      requestAnimationFrame(frame);\n  }\n  requestAnimationFrame(frame);\n}\n\nlet arrows = trackKeys(arrowCodes);\n\nfunction runLevel(level, Display, gameContinues) {\n  let display = new Display(document.body, level);\n  window.display = display;\n  runAnimation(function(step) {\n    level.animate(step, arrows);\n    display.drawFrame(step);\n    if (level.isFinished()) {\n      display.clear();\n      if (gameContinues)\n        gameContinues(level.status);\n      return false;\n    }\n  });\n}\n\nexport function play(plans, Display) {\n  function startLevel(n) {\n    runLevel(new Level(plans[n]), Display, function(status) {\n      if (status === \"lost\")\n        startLevel(n);\n      else if (n < plans.length - 1)\n        startLevel(n + 1);\n    });\n  }\n  startLevel(0);\n}\n\nfunction flipHorizontally(context, around) {\n  context.translate(around, 0);\n  context.scale(-1, 1);\n  context.translate(-around, 0);\n}\n\nexport function Canvas(parent, level) {\n  this.canvas = document.createElement(\"canvas\");\n  this.canvas.width = Math.min(600, level.width * spriteSize);\n  this.canvas.height = Math.min(450, level.height * spriteSize);\n  parent.appendChild(this.canvas);\n  this.cx = this.canvas.getContext(\"2d\");\n\n  this.level = level;\n  this.animationTime = 0;\n  this.facingRight = false;\n\n  this.viewport = {\n    left: 0,\n    top: 0,\n    width: this.canvas.width / spriteSize,\n    height: this.canvas.height / spriteSize\n  };\n\n  this.drawFrame(0);\n}\n\nCanvas.prototype.clear = function() {\n  this.canvas.parentNode.removeChild(this.canvas);\n};\n\nCanvas.prototype.drawFrame = function(step) {\n  this.animationTime += step;\n\n  this.updateViewport();\n  this.clearDisplay();\n  this.drawBackground();\n  this.drawSprites();\n};\n\nCanvas.prototype.updateViewport = function() {\n  let view = this.viewport, margin = view.width / 3;\n  let megaman = this.level.megaman;\n  let center = megaman.pos.plus(megaman.size.times(0.5));\n\n  if (center.x < view.left + margin)\n    view.left = Math.max(center.x - margin, 0);\n  else if (center.x > view.left + view.width - margin)\n    view.left = Math.min(center.x + margin - view.width,\n                         this.level.width - view.width);\n  if (center.y < view.top + margin)\n    view.top = Math.max(center.y - margin, 0);\n  else if (center.y > view.top + view.height - margin)\n    view.top = Math.min(center.y + margin - view.height,\n                        this.level.height - view.height);\n};\n\nCanvas.prototype.clearDisplay = function() {\n  if (this.level.status === \"won\") {\n    //TODO\n    console.log(\"YOU WON!\");\n  } else if (this.level.status === \"lost\") {\n    //TODO\n    console.log(\"YOU LOST!\");\n  } else {\n    this.cx.fillStyle = \"lightblue\";\n  }\n  // Don't forget to make things transparent!\n  this.cx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n};\n\nCanvas.prototype.drawBackground = function() {\n  let view = this.viewport;\n  let left = Math.floor(view.left);\n  let right = Math.ceil(view.left + view.width);\n  let top = Math.floor(view.top);\n  let bottom = Math.ceil(view.top + view.height);\n\n  for (let y = top; y < bottom; y++) {\n    for (let x = left; x < right; x++) {\n      let fieldType = this.level.grid[y][x];\n      if (fieldType === null) continue;\n      let xPosition = (x - view.left) * spriteSize;\n      let yPosition = (y - view.top) * spriteSize;\n\n      let spriteFrameNumber;\n      if (fieldType === \"water\") spriteFrameNumber = 16;\n      if (fieldType === \"block\") spriteFrameNumber = 15;\n\n      this.cx.drawImage(\n        spriteRoll,\n        (spriteFrameNumber * spriteSize), 0, spriteSize, spriteSize,\n        xPosition, yPosition, spriteSize, spriteSize);\n    }\n  }\n};\n\nCanvas.prototype.drawMegaMan = function(x, y, width, height) {\n  let spriteFrameNumber = 0;\n  let megaman = this.level.megaman;\n\n  if (megaman.speed.x !== 0)\n    this.facingRight = megaman.speed.x < 0;\n\n  if (megaman.speed.y !== 0) {\n    spriteFrameNumber = 11;\n  } else if (megaman.speed.x !== 0) {\n    spriteFrameNumber = Math.floor(this.animationTime * 12) % 10 + 1;\n  }\n\n  this.cx.save(); //keep drawing context intact\n  if (this.facingRight)\n    flipHorizontally(this.cx, x + width / 2);\n\n  this.cx.drawImage(\n    spriteRoll,\n    (spriteFrameNumber * width), 0,\n    width, height,\n    x, y, width, height\n  );\n\n  this.cx.restore(); //restore drawing context\n};\n\nCanvas.prototype.drawBoss = function(x, y, width, height) {\n  let spriteFrameNumber = 13;\n  this.cx.drawImage(\n    spriteRoll,\n    (spriteFrameNumber * width), 0,\n    width, height,\n    x, y, width, height\n  );\n};\n\nCanvas.prototype.drawBullet = function(x, y, width, height) {\n  let spriteFrameNumber = 12;\n  this.cx.drawImage(\n    spriteRoll,\n    (spriteFrameNumber * width), 0,\n    width, height,\n    x, y, width, height\n  );\n};\n\nCanvas.prototype.drawSprites = function() {\n  this.level.sprites.forEach(function(sprite) {\n    let width = sprite.size.x * spriteSize;\n    let height = sprite.size.y * spriteSize;\n    let x = (sprite.pos.x - this.viewport.left) * spriteSize;\n    let y = (sprite.pos.y - this.viewport.top) * spriteSize;\n    if (sprite.type === \"megaman\") {\n      this.drawMegaMan(x, y, width, height);\n    } else if (sprite.type === \"boss\"){\n      this.drawBoss(x, y, width, height);\n    } else if (sprite.type === \"bullet\"){\n      this.drawBullet(x, y, width, height);\n    }\n  }, this);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game.js","export let levels = [\n  [\"                                                                                    \",\n   \"                                                                                    \",\n   \"                                                                                    \",\n   \"                                                                                    \",\n   \"                                                                                    \",\n   \"                                                                                    \",\n   \"                                           ####               ######   ###  ########\",\n   \"                                                                                    \",\n   \"                                                   #########                        \",\n   \"                                            #####                                   \",\n   \"     M   B       ###                                                                \",\n   \"WW############WWWWWWWWW########WWW####################WWWWWWWWWWWWWWWWWWWWWWWWWWWWWW\",\n   \"                                                                                    \",]\n ];\n\n\n\n// WEBPACK FOOTER //\n// ./lib/levels.js"],"sourceRoot":""}